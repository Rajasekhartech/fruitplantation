var PlayerController=pc.createScript("playerController");PlayerController.attributes.add("BasePlatformEntity",{type:"entity"}),PlayerController.attributes.add("PlayerRootEntity",{type:"entity"}),PlayerController.attributes.add("RotationSpeed",{type:"number",default:.01}),PlayerController.attributes.add("MovementSpeed",{type:"number",default:.1}),PlayerController.attributes.add("ItsInAir",{type:"boolean",default:!1}),PlayerController.attributes.add("IsJump",{type:"boolean",default:!1}),PlayerController.attributes.add("IsDead",{type:"boolean",default:!1}),PlayerController.attributes.add("Colider",{type:"entity"}),PlayerController.attributes.add("BasePlatformHandler",{type:"entity"}),PlayerController.attributes.add("PlayerAnimation",{type:"entity"}),PlayerController.prototype.initialize=function(){this.Colider.collision.on("triggerenter",this.OnEnterIntoBase,this),this.Colider.collision.on("triggerleave",this.OnExitIntoBase,this)},PlayerController.prototype.update=function(t){if(!this.IsDead){this.IsMoving=!1;var e=this.app;(e.keyboard.isPressed(pc.KEY_LEFT)||e.keyboard.isPressed(pc.KEY_A)||globalVariables.IsLeftClick)&&this.entity.rotateLocal(0,2,0),(e.keyboard.isPressed(pc.KEY_RIGHT)||e.keyboard.isPressed(pc.KEY_D)||globalVariables.IsRightClick)&&this.entity.rotateLocal(0,-2,0),(e.keyboard.isPressed(pc.KEY_UP)||e.keyboard.isPressed(pc.KEY_W)||globalVariables.IsForwardClick)&&this.entity.translateLocal(this.MovementSpeed,0,0),(e.keyboard.wasPressed(pc.KEY_DOWN)||e.keyboard.wasPressed(pc.KEY_S)||globalVariables.IsBackwardClick)&&this.entity.rotateLocal(0,180,0),e.keyboard.wasPressed(pc.KEY_SPACE)&&(this.PlayerAnimation.animation.play("JumpInStand"),setTimeout((()=>{this.time=.8,this.IsJump=!0}),300)),this.IsJump&&(this.time-=t,this.entity.translateLocal(.08,0,0),this.time<=0&&(this.IsJump=!1,this.PlayerAnimation.animation.play("Idle")))}},PlayerController.prototype.OnEnterIntoBase=function(t){this.ItsInAir=!1,t.tags.has("Base")&&this.PlayerInBase()},PlayerController.prototype.OnExitIntoBase=function(t){this.ItsInAir=!0,setTimeout((()=>{this.ItsInAir&&(console.log("dead"),this.PlayerDead())}),500),t.tags.has("Base")&&this.PlayerInOtherArea()},PlayerController.prototype.PlayerDead=function(){this.IsDead=!0,this.PlayerAnimation.animation.play("JumpFall"),globalVariables.GameManager.script.gameManager.CharacterCount-=1,setTimeout((()=>{this.PlayerRespawn()}),2e3)},PlayerController.prototype.PlayerRespawn=function(){this.IsDead=!1,0===globalVariables.GameManager.script.gameManager.CharacterCount&&globalVariables.GameManager.script.gameManager.ReSpawnPlayer(),this.entity.destroy()},PlayerController.prototype.PlayerInBase=function(){var t=this.entity.getPosition().clone(),e=this.entity.getRotation().clone(),a=this.entity.getScale().clone();this.entity.reparent(this.BasePlatformEntity),this.entity.setPosition(t),this.entity.setRotation(e),this.entity.setLocalScale(a)},PlayerController.prototype.PlayerInOtherArea=function(){this.PlayerRootEntity.setLocalRotation(this.BasePlatformHandler.getLocalRotation()),this.entity.reparent(this.PlayerRootEntity)};var GameManager=pc.createScript("gameManager");GameManager.attributes.add("UiManager",{type:"entity"}),GameManager.attributes.add("GameDurationInSec",{type:"number"}),GameManager.attributes.add("StarCount",{type:"number"}),GameManager.attributes.add("IsGameStart",{type:"boolean",default:!1}),GameManager.attributes.add("CharacterCount",{type:"number",default:1}),GameManager.attributes.add("PlayerEntity",{type:"entity"}),GameManager.attributes.add("PlayerForClone",{type:"entity"}),GameManager.attributes.add("PlayerAnimation",{type:"entity"}),GameManager.attributes.add("NeededForPlant",{type:"entity",array:!0}),GameManager.attributes.add("UnNeededForPlant",{type:"entity",array:!0}),GameManager.attributes.add("PickupPlatFormHandlers",{type:"entity",array:!0}),GameManager.attributes.add("PlatFormHandlers",{type:"entity",array:!0}),GameManager.attributes.add("BaseHandlers",{type:"entity",array:!0}),GameManager.attributes.add("PlantATree",{type:"entity"}),GameManager.attributes.add("RootEntity",{type:"entity"}),GameManager.attributes.add("IsStartJump",{type:"boolean",default:!1}),GameManager.attributes.add("TargetEntity",{type:"entity"}),GameManager.attributes.add("ElementThrowEffect",{type:"entity"}),GameManager.attributes.add("TreePlantDisableEffect",{type:"entity"}),GameManager.prototype.initialize=function(){this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),this.StartGame(),this.lerpedPosition=new pc.Vec3,this.speed=5},GameManager.prototype.StartGame=function(){globalVariables.IsGamePause=!1,this.IsGameStart=!0,this.CreateElementsForPlant(),this.SpawnPlayer()},GameManager.prototype.SpawnPlayer=function(){Math.floor(Math.random()*this.BaseHandlers.length);var e=this.BaseHandlers[2].script.baseHandler;this.PlayerEntity.reparent(e.SpawnPositionEntity),globalVariables.ItsInBase=!0,globalVariables.PlayerBaseIndex=e.Index},GameManager.prototype.OnClickPlayerJump=function(){if(console.log("Jump Called"),globalVariables.ItsInBase){console.log("baseIndex",globalVariables.PlayerBaseIndex);var e=this.BaseHandlers[globalVariables.PlayerBaseIndex].script.baseHandler;if(e.IsJumpable){console.log("Correct Jump",e.PossiblePlatformIndex),this.PlayerAnimation.anim.setBoolean("Throw",!1),this.PlayerAnimation.anim.setBoolean("No_All_Item",!1),this.PlayerAnimation.anim.setBoolean("Pick",!1);var t=this.PlatFormHandlers[e.PossiblePlatformIndex].script.platformHandler;this.PlayerAnimation.anim.setTrigger("Land");var a=this.PlayerEntity.getPosition().clone(),i=this.PlayerEntity.getRotation().clone();this.PlayerEntity.reparent(this.RootEntity),this.PlayerEntity.setPosition(a),this.PlayerEntity.setRotation(i);var n=t.SpawnPositionEntity.getPosition();this.PlayerEntity.tween(this.PlayerEntity.getLocalPosition()).to({x:n.x,y:n.y,z:n.z},.6,pc.Linear).start(),setTimeout((()=>{this.PlayerEntity.setLocalEulerAngles(t.SpawnPositionEntity.getLocalEulerAngles()),globalVariables.ItsInBase=!1,globalVariables.ItsInPlatForm=!0,globalVariables.PlayerBaseIndex=0,globalVariables.PlayerPlatformIndex=e.PossiblePlatformIndex,this.GoForPick()}),600)}else this.PlayerAnimation.anim.setTrigger("Fall"),setTimeout((()=>{this.PlayerAnimation.anim.setTrigger("Respawn"),this.PlayerEntity.reparent(this.RootEntity),this.PlayerEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.PlayerEntity.setLocalEulerAngles(new pc.Vec3(0,0,0)),this.ReSpawnPlayer(),globalVariables.IsControllBlocked=!1}),3e3)}else if(globalVariables.ItsInPlatForm){var r=this.PlatFormHandlers[globalVariables.PlayerPlatformIndex].script.platformHandler;if(r.IsJumpable){console.log("Correct Jump",r.PossibleBaseIndex);var l=this.BaseHandlers[r.PossibleBaseIndex].script.baseHandler;this.PlayerAnimation.anim.setTrigger("Land");var s=this.PlayerEntity.getPosition().clone(),o=this.PlayerEntity.getRotation().clone();this.PlayerEntity.reparent(this.RootEntity),this.PlayerEntity.setPosition(s),this.PlayerEntity.setRotation(o),this.TargetEntity=l.SpawnPositionEntity,setTimeout((()=>{this.IsStartJump=!0}),300),setTimeout((()=>{this.IsStartJump=!1;var e=this.PlayerEntity.getPosition().clone();this.PlayerEntity.reparent(l.SpawnPositionEntity),this.PlayerEntity.setPosition(e),this.PlayerEntity.setLocalEulerAngles(new pc.Vec3(0,0,0)),globalVariables.ItsInBase=!0,globalVariables.ItsInPlatForm=!1,globalVariables.PlayerBaseIndex=r.PossibleBaseIndex,globalVariables.PlayerPlatformIndex=0}),900),setTimeout((()=>{this.ReCreateElementsForPlant(),globalVariables.IsControllBlocked=!1}),3e3)}else this.PlayerAnimation.anim.setTrigger("Fall"),setTimeout((()=>{this.PlayerAnimation.anim.setTrigger("Respawn"),this.PlayerEntity.reparent(this.RootEntity),this.PlayerEntity.setLocalPosition(new pc.Vec3(0,0,0)),this.PlayerEntity.setLocalEulerAngles(new pc.Vec3(0,0,0)),this.ReSpawnPlayer(),globalVariables.IsControllBlocked=!1}),3e3)}else console.log("no platform detected")},GameManager.prototype.GoForPick=function(){console.log("PlatformIndex",globalVariables.PlayerPlatformIndex);var e=this.PlatFormHandlers[globalVariables.PlayerPlatformIndex].script.platformHandler;if(5===e.PlatFormIndex){if(!(globalVariables.IsSeedPicked&&globalVariables.IsSoilPicked&&globalVariables.IsWaterPicked))return this.PlayerAnimation.anim.setBoolean("No_All_Item",!0),void(globalVariables.IsControllBlocked=!1);this.PlayerAnimation.anim.setBoolean("Throw",!0),setTimeout((()=>{this.ElementThrowEffect.enabled=!0}),5e3),setTimeout((()=>{this.ElementThrowEffect.enabled=!1}),7e3),setTimeout((()=>{globalVariables.IsControllBlocked=!1,this.AddStar(2),globalVariables.IsSeedPicked=!1,globalVariables.IsSoilPicked=!1,globalVariables.IsWaterPicked=!1,this.TreePlant()}),6e3)}else this.PlayerAnimation.anim.setBoolean("Pick",!0);setTimeout((()=>{5!=e.PlatFormIndex&&this.PickanElement(e)}),6500)},GameManager.prototype.TreePlant=function(){this.UiManager.script.uimanager.UpdateCollectableItems(),this.PlantATree.enabled=!0;var e=this.PlantATree.getLocalScale();e.x=0,e.y=0,e.z=0,this.PlantATree.setLocalScale(e),this.PlantATree.tween(this.PlantATree.getLocalScale()).to({x:1,y:1,z:1},1,pc.SineOut).start(),setTimeout((()=>{this.TreePlantDisableEffect.enabled=!0}),2e3),setTimeout((()=>{this.TreePlantDisableEffect.enabled=!1}),4e3)},GameManager.prototype.PickanElement=function(e){0===e.ElementIndex?(globalVariables.IsSeedPicked=!0,this.UiManager.script.uimanager.UpdateCollectableItems()):1===e.ElementIndex?(globalVariables.IsSoilPicked=!0,this.UiManager.script.uimanager.UpdateCollectableItems()):2===e.ElementIndex?(globalVariables.IsWaterPicked=!0,this.UiManager.script.uimanager.UpdateCollectableItems()):this.RemoveStar(1),e.ElementEntity.destroy(),setTimeout((()=>{globalVariables.IsControllBlocked=!1}),5500)},GameManager.prototype.ReSpawnPlayer=function(){this.RemoveStar(1);var e=Math.floor(Math.random()*this.BaseHandlers.length),t=this.BaseHandlers[e].script.baseHandler;this.PlayerEntity.reparent(t.SpawnPositionEntity),globalVariables.ItsInPlatForm=!1,globalVariables.ItsInBase=!0,globalVariables.PlayerBaseIndex=t.Index},GameManager.prototype.update=function(e){this.IsStartJump&&(this.lerpedPosition.lerp(this.PlayerEntity.getLocalPosition(),this.TargetEntity.getPosition(),this.speed*e),this.PlayerEntity.setLocalPosition(this.lerpedPosition)),this.StartEndTimer&&(this.TotalTime-=60*e,this.UiManager.script.uimanager.UpdateTimer(this.TotalTime),this.TotalTime<0&&(this.UiManager.script.uimanager.UpdateTimer(0),this.StartEndTimer=!1)),globalVariables.IsGamePause||this.IsGameStart&&(this.UiManager.script.uimanager.UpdateTimer(this.GameDurationInSec),this.GameDurationInSec-=e,this.GameDurationInSec<0&&(this.GameEnd(),this.IsGameStart=!1))},GameManager.prototype.CreateElementsForPlant=function(){for(var e=[...this.PickupPlatFormHandlers],t=0;t<e.length;t++){var a=Math.floor(Math.random()*e.length),i=e[a];e[a]=e[t],e[t]=i}for(var n=0;n<e.length;n++){var r=e[n].script.platformHandler;r.ElementIndex=n,this.SpawnElementsForPlant(r,r.ElementIndex)}},GameManager.prototype.ReCreateElementsForPlant=function(){for(var e=0;e<this.PickupPlatFormHandlers.length;e++){this.PickupPlatFormHandlers[e].script.platformHandler.ElementEntity.destroy()}this.PlantATree.enabled=!1,this.CreateElementsForPlant()},GameManager.prototype.SpawnElementsForPlant=function(e,t){if(0!==t||globalVariables.IsSeedPicked)if(1!==t||globalVariables.IsSoilPicked)if(2!==t||globalVariables.IsWaterPicked){var a=Math.floor(Math.random()*this.UnNeededForPlant.length),i=this.UnNeededForPlant[a].clone();i.setPosition(e.SpwanPosition),i.enabled=!0,e.ElementIndex=5,e.ElementEntity=i}else{var n=this.NeededForPlant[2].clone();n.setPosition(e.SpwanPosition),n.enabled=!0,e.ElementIndex=2,e.ElementEntity=n}else{var r=this.NeededForPlant[1].clone();r.setPosition(e.SpwanPosition),r.enabled=!0,e.ElementIndex=1,e.ElementEntity=r}else{var l=this.NeededForPlant[0].clone();l.setPosition(e.SpwanPosition),l.enabled=!0,e.ElementIndex=0,e.ElementEntity=l}},GameManager.prototype.PlayerEnteredNewPlatform=function(e,t){0==this.elementIndex||1==this.elementIndex||2==this.elementIndex?this.AddStar(2):this.RemoveStar(1)},GameManager.prototype.AddStar=function(e){globalVariables.IsGamePause||(this.StarCount+=e,this.UiManager.script.uimanager.UpdateScore(this.StarCount),this.UiManager.script.uimanager.PlayStarCollectAnimation())},GameManager.prototype.RemoveStar=function(e){globalVariables.IsGamePause||(this.StarCount-=e,this.StarCount<0&&(this.StarCount=0),this.UiManager.script.uimanager.UpdateScore(this.StarCount),this.UiManager.script.uimanager.PlayStarLoseAnimation())},GameManager.prototype.TimeOut=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,this.UiManager.script.uimanager.ShowTimeOut(this.StarCount)},GameManager.prototype.GameEnd=function(){globalVariables.IsGamePause=!0,globalVariables.IsControllBlocked=!0,this.UiManager.script.uimanager.ShowGameEnd(this.StarCount)};var GlobalVariables=pc.createScript("globalVariables");GlobalVariables.attributes.add("IsGamePause",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsControllBlocked",{type:"boolean",default:!1}),GlobalVariables.attributes.add("GameManager",{type:"entity"}),GlobalVariables.attributes.add("SoundManager",{type:"entity"}),GlobalVariables.attributes.add("UIManager",{type:"entity"}),GlobalVariables.attributes.add("ItsInBase",{type:"boolean",default:!1}),GlobalVariables.attributes.add("ItsInPlatForm",{type:"boolean",default:!1}),GlobalVariables.attributes.add("PlayerBaseIndex",{type:"number",default:0}),GlobalVariables.attributes.add("PlayerPlatformIndex",{type:"number",default:0}),GlobalVariables.attributes.add("PosibleBaseIndex",{type:"number",default:0}),GlobalVariables.attributes.add("PosiblePlatformIndex",{type:"number",default:0}),GlobalVariables.attributes.add("IsSeedPicked",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsWaterPicked",{type:"boolean",default:!1}),GlobalVariables.attributes.add("IsSoilPicked",{type:"boolean",default:!1}),GlobalVariables.prototype.initialize=function(){window.globalVariables=this};var Uimanager=pc.createScript("uimanager");function setCookie(t,n,e){var i=new Date;i.setDate(i.getDate()+e);var a=escape(n)+(null==e?"":"; expires="+i.toUTCString());document.cookie=t+"="+a+"; path=/"}Uimanager.attributes.add("TimerTxt",{type:"entity"}),Uimanager.attributes.add("ScoreTxt",{type:"entity"}),Uimanager.attributes.add("StarCollectAnim",{type:"entity"}),Uimanager.attributes.add("StarLoseAnim",{type:"entity"}),Uimanager.attributes.add("PauseBtnEntity",{type:"entity"}),Uimanager.attributes.add("PauseMenuEntity",{type:"entity"}),Uimanager.attributes.add("ResumeBtnEntity",{type:"entity"}),Uimanager.attributes.add("RestartBtnEntity",{type:"entity"}),Uimanager.attributes.add("SoundMuteBtn",{type:"entity"}),Uimanager.attributes.add("SoundUnMuteBtn",{type:"entity"}),Uimanager.attributes.add("ExitBtn",{type:"entity"}),Uimanager.attributes.add("GameEndEntity",{type:"entity"}),Uimanager.attributes.add("GameEndRemainingTimeTxt",{type:"entity"}),Uimanager.attributes.add("GameEndStarCountTxt",{type:"entity"}),Uimanager.attributes.add("GameEndRestartEntity",{type:"entity"}),Uimanager.attributes.add("GameEndContinueBtnEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutStarCountTxt",{type:"entity"}),Uimanager.attributes.add("TimeOutRestartEntity",{type:"entity"}),Uimanager.attributes.add("TimeOutContinueBtnEntity",{type:"entity"}),Uimanager.attributes.add("Seed",{type:"entity"}),Uimanager.attributes.add("Soil",{type:"entity"}),Uimanager.attributes.add("Water",{type:"entity"}),Uimanager.attributes.add("JumpBtn",{type:"entity"}),Uimanager.prototype.initialize=function(){this.PauseBtnEntity.button.on("mousedown",this.OnClickPlause,this),this.ResumeBtnEntity.button.on("mousedown",this.OnClickResume,this),this.RestartBtnEntity.button.on("mousedown",this.OnClickRestart,this),this.SoundMuteBtn.button.on("mousedown",this.OnClickMute,this),this.SoundUnMuteBtn.button.on("mousedown",this.OnClickUnMute,this),this.ExitBtn.button.on("mousedown",this.OnClickContinue,this),this.GameEndRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.TimeOutRestartEntity.button.on("mousedown",this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on("mousedown",this.OnClickContinue,this),this.JumpBtn.button.on("mousedown",this.OnClickJump,this),this.PauseBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickPlause,this),this.ResumeBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickResume,this),this.RestartBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.SoundMuteBtn.button.on(pc.EVENT_TOUCHEND,this.OnClickMute,this),this.SoundUnMuteBtn.button.on(pc.EVENT_TOUCHEND,this.OnClickUnMute,this),this.ExitBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.GameEndRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.GameEndContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.TimeOutRestartEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickRestart,this),this.TimeOutContinueBtnEntity.button.on(pc.EVENT_TOUCHSTART,this.OnClickContinue,this),this.JumpBtn.button.on(pc.EVENT_TOUCHSTART,this.OnClickJump,this),this.StartCoinAnim=!1,this.CoinsCount=0,this.CoinAnimCount=0,this.app.touch?this.JumpBtn.enabled=!0:this.JumpBtn.enabled=!1},Uimanager.prototype.OnClickJump=function(){globalVariables.IsControllBlocked||(globalVariables.IsControllBlocked=!0,globalVariables.GameManager.script.gameManager.OnClickPlayerJump())},Uimanager.prototype.UpdateCollectableItems=function(){globalVariables.IsSeedPicked?this.Seed.button.active=!0:this.Seed.button.active=!1,globalVariables.IsSoilPicked?this.Soil.button.active=!0:this.Soil.button.active=!1,globalVariables.IsWaterPicked?this.Water.button.active=!0:this.Water.button.active=!1},Uimanager.prototype.update=function(t){this.StartCoinAnim&&(this.CoinAnimCount+=60*t,this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.CoinsCount<this.CoinAnimCount&&(this.GameEndStarCountTxt.element.text=Math.round(this.CoinAnimCount),this.StartCoinAnim=!1))},Uimanager.prototype.UpdateTimer=function(t){Math.floor(t/3600);var n=Math.floor(t%3600/60),e=Math.round(t%60);this.TimerTxt.element.text=e>9?"0"+n+":"+e:"0"+n+":0"+e},Uimanager.prototype.UpdateScore=function(t){this.ScoreTxt.element.text=t},Uimanager.prototype.PlayStarCollectAnimation=function(){this.StarCollectAnim.enabled=!0,setTimeout((()=>{this.StarCollectAnim.enabled=!1}),800)},Uimanager.prototype.PlayStarLoseAnimation=function(){this.StarLoseAnim.enabled=!0,setTimeout((()=>{this.StarLoseAnim.enabled=!1}),800)},Uimanager.prototype.OnClickPlause=function(){globalVariables.IsGamePause||(globalVariables.IsGamePause=!0,this.PauseMenuEntity.enabled=!0,this.app.timeScale=0)},Uimanager.prototype.OnClickResume=function(){this.app.timeScale=1,this.PauseMenuEntity.enabled=!1,setTimeout((()=>{globalVariables.IsGamePause=!1}),500)},Uimanager.prototype.OnClickMute=function(){this.app.systems.sound.volume=0,this.IsMuted=!1,this.SoundUnMuteBtn.enabled=!0,this.SoundMuteBtn.enabled=!1},Uimanager.prototype.OnClickUnMute=function(){this.app.systems.sound.volume=1,this.IsMuted=!0,this.SoundUnMuteBtn.enabled=!1,this.SoundMuteBtn.enabled=!0},Uimanager.prototype.ShowTimeOut=function(t){this.TimeOutStarCountTxt.element.text=t,this.TimeOutEntity.enabled=!0},Uimanager.prototype.ShowGameEnd=function(t){this.GameEndStarCountTxt.element.text=t,this.GameEndEntity.enabled=!0},Uimanager.prototype.OnClickContinue=function(t){setCookie("SustainabilityProgress",6,1),window.location.replace("../main.html")},Uimanager.prototype.OnClickRestart=function(){this.app.timeScale=1,window.location.reload()};var SoundManager=pc.createScript("soundManager");SoundManager.attributes.add("Common",{type:"entity"}),SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")},SoundManager.prototype.Play=function(){this.Common.sound.play("")};var AnimateSprite=pc.createScript("animateSprite");AnimateSprite.attributes.add("startFrame",{type:"number",default:0,description:"Frame to start animation from"}),AnimateSprite.attributes.add("numFrames",{type:"number",default:1,description:"Number of frames to play before looping"}),AnimateSprite.attributes.add("frameRate",{type:"number",default:1,description:"Playback frames per second"}),AnimateSprite.prototype.initialize=function(){this.timer=1/this.frameRate,this.frame=this.startFrame},AnimateSprite.prototype.update=function(t){this.timer-=t,this.timer<0&&(this.frame++,this.frame>=this.numFrames+this.startFrame&&(this.frame=this.startFrame),this.entity.element.spriteFrame=this.frame,this.timer=1/this.frameRate)};var BasePlatformHandler=pc.createScript("basePlatformHandler");BasePlatformHandler.attributes.add("RotationSpeed",{type:"number",default:.01}),BasePlatformHandler.prototype.initialize=function(){},BasePlatformHandler.prototype.update=function(t){this.entity.rotateLocal(0,t*this.RotationSpeed,0)};var PlayerAnimationHandler=pc.createScript("playerAnimationHandler");PlayerAnimationHandler.attributes.add("LeftBtn",{type:"entity"}),PlayerAnimationHandler.attributes.add("RightBtn",{type:"entity"}),PlayerAnimationHandler.attributes.add("ForwardBtn",{type:"entity"}),PlayerAnimationHandler.attributes.add("BackwardBtn",{type:"entity"}),PlayerAnimationHandler.attributes.add("PlayerAnimation",{type:"entity"}),PlayerAnimationHandler.prototype.initialize=function(){this.app;this.direction="Idle",this.LeftBtn.button.on(pc.EVENT_TOUCHSTART,this.OnLeftBtnTouchStart,this),this.RightBtn.button.on(pc.EVENT_TOUCHSTART,this.OnRightBtnTouchStart,this),this.ForwardBtn.button.on(pc.EVENT_TOUCHSTART,this.OnForwardBtnTouchStart,this),this.BackwardBtn.button.on(pc.EVENT_TOUCHSTART,this.OnBackwardBtnTouchStart,this),this.LeftBtn.button.on(pc.EVENT_TOUCHEND,this.OnLeftBtnTouchEnd,this),this.RightBtn.button.on(pc.EVENT_TOUCHEND,this.OnRightBtnTouchEnd,this),this.ForwardBtn.button.on(pc.EVENT_TOUCHEND,this.OnForwardBtnTouchEnd,this),this.BackwardBtn.button.on(pc.EVENT_TOUCHEND,this.OnBackwardBtnTouchEnd,this),this.LeftTouch=!1,this.RightTouch=!1,this.ForwardTouch=!1,this.BackwardTouch=!1},PlayerAnimationHandler.prototype.update=function(t){this.keyChange()},PlayerAnimationHandler.prototype.OnLeftBtnTouchStart=function(t){this.LeftTouch=!0,globalVariables.IsLeftClick=!0},PlayerAnimationHandler.prototype.OnRightBtnTouchStart=function(t){this.RightTouch=!0,globalVariables.IsRightClick=!0},PlayerAnimationHandler.prototype.OnForwardBtnTouchStart=function(t){this.ForwardTouch=!0,globalVariables.IsForwardClick=!0},PlayerAnimationHandler.prototype.OnBackwardBtnTouchStart=function(t){this.BackwardTouch=!0,globalVariables.IsBackwardClick=!0},PlayerAnimationHandler.prototype.OnLeftBtnTouchEnd=function(t){t.event.preventDefault(),this.LeftTouch=!1,globalVariables.IsLeftClick=!1},PlayerAnimationHandler.prototype.OnRightBtnTouchEnd=function(t){t.event.preventDefault(),this.RightTouch=!1,globalVariables.IsRightClick=!1},PlayerAnimationHandler.prototype.OnForwardBtnTouchEnd=function(t){t.event.preventDefault(),this.ForwardTouch=!1,globalVariables.IsForwardClick=!1},PlayerAnimationHandler.prototype.OnBackwardBtnTouchEnd=function(t){t.event.preventDefault(),this.BackwardTouch=!1,globalVariables.IsBackwardClick=!1},PlayerAnimationHandler.prototype.checkButtons=function(){var t=this.app,n=t.keyboard.isPressed(pc.KEY_W)||t.keyboard.isPressed(pc.KEY_UP)||this.ForwardTouch,i=t.keyboard.isPressed(pc.KEY_A)||t.keyboard.isPressed(pc.KEY_LEFT)||this.LeftTouch,a=t.keyboard.isPressed(pc.KEY_S)||t.keyboard.isPressed(pc.KEY_DOWN)||this.BackwardTouch,r=t.keyboard.isPressed(pc.KEY_D)||t.keyboard.isPressed(pc.KEY_RIGHT)||this.RightTouch;this.direction=n&&!a?i&&!r?"Run Forward Left":r&&!i?"Run Forward Right":"Run Forward":a&&!n?i&&!r?"Run Backward Left":r&&!i?"Run Backward Right":"Run Backward":i&&!r?"Run Left":r&&!i?"Run Right":"Idle"},PlayerAnimationHandler.prototype.keyChange=function(t){var n=this.direction;this.checkButtons(),n!==this.direction&&("Run Left"===this.direction?this.PlayerAnimation.animation.play("TurnLeft60"):"Run Right"===this.direction?this.PlayerAnimation.animation.play("TurnRight60"):"Run Forward"===this.direction||"Run Backward"===this.direction||"Run Forward Left"===this.direction||"Run Forward Right"===this.direction||"Idle"===this.direction&&this.PlayerAnimation.animation.play("Idle"))};var PlatformHandler=pc.createScript("platformHandler");PlatformHandler.attributes.add("PlatFormIndex",{type:"number"}),PlatformHandler.attributes.add("PossibleBaseIndex",{type:"number"}),PlatformHandler.attributes.add("ElementIndex",{type:"number",default:5}),PlatformHandler.attributes.add("SpwanPosition",{type:"vec3"}),PlatformHandler.attributes.add("ElementEntity",{type:"entity"}),PlatformHandler.attributes.add("IsJumpable",{type:"boolean",default:!1}),PlatformHandler.attributes.add("IsPlayerIsHere",{type:"boolean",default:!1}),PlatformHandler.attributes.add("Colider",{type:"entity"}),PlatformHandler.attributes.add("PlayerDetectionColider",{type:"entity"}),PlatformHandler.attributes.add("SpawnPositionEntity",{type:"entity"}),PlatformHandler.attributes.add("FallingEntityPos",{type:"entity"}),PlatformHandler.prototype.initialize=function(){this.Colider.collision.on("triggerenter",this.OnTriggerEnter,this),this.Colider.collision.on("triggerleave",this.OnTriggerExit,this),this.PlayerDetectionColider.collision.on("triggerenter",this.OnTriggerPlayerEnter,this),this.PlayerDetectionColider.collision.on("triggerleave",this.OnTriggerPlayerExit,this)},PlatformHandler.prototype.OnTriggerEnter=function(t){if(t.tags.has("Base")){this.IsJumpable=!0;var e=t.script.indexDetectionHandler;this.PossibleBaseIndex=e.Index}},PlatformHandler.prototype.OnTriggerExit=function(t){t.tags.has("Base")&&(this.IsJumpable=!1)},PlatformHandler.prototype.OnTriggerPlayerEnter=function(t){},PlatformHandler.prototype.OnTriggerPlayerExit=function(t){};var ElementHandler=pc.createScript("elementHandler");ElementHandler.prototype.initialize=function(){};var JumpGirlHandler=pc.createScript("jumpGirlHandler");JumpGirlHandler.attributes.add("JumpTargetPosition",{type:"vec3"}),JumpGirlHandler.attributes.add("AnimationEntity",{type:"entity"}),JumpGirlHandler.prototype.initialize=function(){},JumpGirlHandler.prototype.update=function(a){globalVariables.IsControllBlocked||this.app.keyboard.wasPressed(pc.KEY_SPACE)&&(globalVariables.IsControllBlocked=!0,this.PlayJump())},JumpGirlHandler.prototype.PlayJump=function(){globalVariables.GameManager.script.gameManager.OnClickPlayerJump()};var BaseHandler=pc.createScript("baseHandler");BaseHandler.attributes.add("Index",{type:"number"}),BaseHandler.attributes.add("PossiblePlatformIndex",{type:"number"}),BaseHandler.attributes.add("IsPlayerIsHere",{type:"boolean",default:!1}),BaseHandler.attributes.add("IsJumpable",{type:"boolean",default:!1}),BaseHandler.attributes.add("SpawnPositionEntity",{type:"entity"}),BaseHandler.attributes.add("FallingPositionEntity",{type:"entity"}),BaseHandler.prototype.initialize=function(){this.entity.collision.on("triggerenter",this.OnTriggerEnter,this),this.entity.collision.on("triggerleave",this.OnTriggerExit,this)},BaseHandler.prototype.OnTriggerEnter=function(e){if(e.tags.has("Platform")){var t=e.script.indexDetectionHandler;this.PossiblePlatformIndex=t.Index,this.IsJumpable=!0}},BaseHandler.prototype.OnTriggerExit=function(e){e.tags.has("Platform")&&(this.IsJumpable=!1)};var IndexDetectionHandler=pc.createScript("indexDetectionHandler");IndexDetectionHandler.attributes.add("Index",{type:"number",default:0});var Hover=pc.createScript("hover");Hover.attributes.add("height",{type:"number"}),Hover.attributes.add("speed",{type:"number"}),Hover.prototype.initialize=function(){this.initialPosition=this.entity.getPosition().clone(),this.initialRotation=this.entity.getEulerAngles().clone(),this.time=2*Math.random()*Math.PI},Hover.prototype.update=function(t){this.time+=this.speed;var i=this.entity.getPosition().clone();i.y=this.initialPosition.y+Math.cos(this.time)*this.height,this.entity.setPosition(i.x,i.y,i.z)};pc.extend(pc,function(){function computeGaussian(e,t){return 1/Math.sqrt(2*Math.PI*t)*Math.exp(-e*e/(2*t*t))}function calculateBlurValues(e,t,s,o,r){e[0]=computeGaussian(0,r),t[0]=0,t[1]=0;var i,a,l=e[0];for(i=0,a=Math.floor(7.5);i<a;i++){var u=computeGaussian(i+1,r);e[2*i]=u,e[2*i+1]=u,l+=2*u;var h=2*i+1.5;t[4*i]=s*h,t[4*i+1]=o*h,t[4*i+2]=-s*h,t[4*i+3]=-o*h}for(i=0,a=e.length;i<a;i++)e[i]/=l}var BloomEffect=function(e){var t={aPosition:pc.SEMANTIC_POSITION},s=["attribute vec2 aPosition;","","varying vec2 vUv0;","","void main(void)","{","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vUv0 = (aPosition + 1.0) * 0.5;","}"].join("\n"),o=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform sampler2D uBaseTexture;","uniform float uBloomThreshold;","","void main(void)","{","    vec4 color = texture2D(uBaseTexture, vUv0);","","    gl_FragColor = clamp((color - uBloomThreshold) / (1.0 - uBloomThreshold), 0.0, 1.0);","}"].join("\n"),r=["precision "+e.precision+" float;","","#define SAMPLE_COUNT 15","","varying vec2 vUv0;","","uniform sampler2D uBloomTexture;","uniform vec2 uBlurOffsets[SAMPLE_COUNT];","uniform float uBlurWeights[SAMPLE_COUNT];","","void main(void)","{","    vec4 color = vec4(0.0);","    for (int i = 0; i < SAMPLE_COUNT; i++)","    {","        color += texture2D(uBloomTexture, vUv0 + uBlurOffsets[i]) * uBlurWeights[i];","    }","","    gl_FragColor = color;","}"].join("\n"),i=["precision "+e.precision+" float;","","varying vec2 vUv0;","","uniform float uBloomEffectIntensity;","uniform sampler2D uBaseTexture;","uniform sampler2D uBloomTexture;","","void main(void)","{","    vec4 bloom = texture2D(uBloomTexture, vUv0) * uBloomEffectIntensity;","    vec4 base = texture2D(uBaseTexture, vUv0);","","    base *= (1.0 - clamp(bloom, 0.0, 1.0));","","    gl_FragColor = base + bloom;","}"].join("\n");this.extractShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:o}),this.blurShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:r}),this.combineShader=new pc.Shader(e,{attributes:t,vshader:s,fshader:i});var a=e.width,l=e.height;this.targets=[];for(var u=0;u<2;u++){var h=new pc.Texture(e,{format:pc.PIXELFORMAT_R8_G8_B8_A8,width:a>>1,height:l>>1});h.minFilter=pc.FILTER_LINEAR,h.magFilter=pc.FILTER_LINEAR,h.addressU=pc.ADDRESS_CLAMP_TO_EDGE,h.addressV=pc.ADDRESS_CLAMP_TO_EDGE;var n=new pc.RenderTarget(e,h,{depth:!1});this.targets.push(n)}this.bloomThreshold=.25,this.blurAmount=4,this.bloomIntensity=1.25,this.sampleWeights=new Float32Array(15),this.sampleOffsets=new Float32Array(30)};return(BloomEffect=pc.inherits(BloomEffect,pc.PostEffect)).prototype=pc.extend(BloomEffect.prototype,{render:function(e,t,s){var o=this.device,r=o.scope;r.resolve("uBloomThreshold").setValue(this.bloomThreshold),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.extractShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,1/this.targets[1].width,0,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),pc.drawFullscreenQuad(o,this.targets[1],this.vertexBuffer,this.blurShader),calculateBlurValues(this.sampleWeights,this.sampleOffsets,0,1/this.targets[0].height,this.blurAmount),r.resolve("uBlurWeights[0]").setValue(this.sampleWeights),r.resolve("uBlurOffsets[0]").setValue(this.sampleOffsets),r.resolve("uBloomTexture").setValue(this.targets[1].colorBuffer),pc.drawFullscreenQuad(o,this.targets[0],this.vertexBuffer,this.blurShader),r.resolve("uBloomEffectIntensity").setValue(this.bloomIntensity),r.resolve("uBloomTexture").setValue(this.targets[0].colorBuffer),r.resolve("uBaseTexture").setValue(e.colorBuffer),pc.drawFullscreenQuad(o,t,this.vertexBuffer,this.combineShader,s)}}),{BloomEffect:BloomEffect}}());var Bloom=pc.createScript("bloom");Bloom.attributes.add("bloomIntensity",{type:"number",default:1,min:0,title:"Intensity"}),Bloom.attributes.add("bloomThreshold",{type:"number",default:.25,min:0,max:1,precision:2,title:"Threshold"}),Bloom.attributes.add("blurAmount",{type:"number",default:4,min:1,title:"Blur amount"}),Bloom.prototype.initialize=function(){this.effect=new pc.BloomEffect(this.app.graphicsDevice),this.effect.bloomThreshold=this.bloomThreshold,this.effect.blurAmount=this.blurAmount,this.effect.bloomIntensity=this.bloomIntensity;var e=this.entity.camera.postEffects;e.addEffect(this.effect),this.on("attr",(function(e,t){this.effect[e]=t}),this),this.on("state",(function(t){t?e.addEffect(this.effect):e.removeEffect(this.effect)})),this.on("destroy",(function(){e.removeEffect(this.effect)}))};pc.script.createLoadingScreen((function(e){var n,t;n=["body {","    background-color: #283538;","}","","#application-splash-wrapper {","    position: absolute;","    top: 0;","    left: 0;","    height: 100%;","    width: 100%;","    background-color: #E33939;","}","","#application-splash {","    position: absolute;","    top: calc(50% - 28px);","    width: 264px;","    left: calc(50% - 132px);","}","","#application-splash img {","    position: absolute;","    margin: 20px auto 0 auto;","    width: 50%;","    left: 25%;","}","","#progress-bar-container {","    margin: 20px auto 0 auto;","    height: 20px;","    width: 100%;","    border: black;","    border-color: white;","    border-style: solid;","    border-width: 5px;","    box-shadow: 5px 5px;","    border-radius: 10px;","    background-color: #F7B4B4;","}","","#progress-bar {","    width: 0%;","    height: 100%;","    background-color: #E33939;","}","","@media (max-width: 480px) {","    #application-splash {","        width: 170px;","        left: calc(50% - 85px);","    }","}"].join("\n"),(t=document.createElement("style")).type="text/css",t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n)),document.head.appendChild(t),function(){var e=document.createElement("div");e.id="application-splash-wrapper",document.body.appendChild(e);var n=document.createElement("div");n.id="application-splash",e.appendChild(n),n.style.display="none";var t=document.createElement("div");t.id="progress-bar-container",n.appendChild(t);var a=document.createElement("div");a.id="progress-bar",t.appendChild(a);var r=document.createElement("img");r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXsAAAB5CAYAAADYgYG0AAAACXBIWXMAAAsSAAALEgHS3X78AAALoElEQVR4nO3d/3XiOBfGcWfPNuApgZRASmBKICWQEqCEUAKUEEoIJQwlDCUsJbDHO1c7DoONZOvK+vH9nMPZP955A0bisSTbV0/X67UCAOTtL9oXAPJH2ANAAQh7IE2zqqrWVVX9qKrqevP6kP8N+B9r9kBa6qqq3quqWll+6k1VVVvaGIQ9kI65jNpnjp/4WFXVd9q5bIQ9kIaZLNnUAz8tgV841uyBNOxGBH1jwTp+2RjZA/FbSdiPdamq6ln+i8Iwsgfit/T0CWuHC7vIDGEP2FnfucVxzOvT8n1rWYLxxdeJA4kh7IG4zT1/Otc7eZAJwh6Im+9wrgn8MhH2AFCArrD3vT555cIQAEyHkT0Qt7PnT3dR+JtIAGEPxO3k+dMR9IUi7IG4XaTUgS8H2rtMhD0QP18B3Zw49rR3mQh7IH57T6P7LaUSykXYA2l4GxnUR+ral42wB9JwlhLFQy6wUt4YhD2QkObOnBfHNfwNQY/G3xF8BgD2mqWcVyl5sJTXbf2cg5wYWLbB/wh7IE1nCXMCHVZYxgGAAhD2AFAAlnHczS02k0j94ZWZ5SYXJ89Pd2rpO55UjqE0fbtqHRXKSAzV9zmj6luEfb9lKyhcN5Fo7xm6kf/Gtr5qNqCuPWxGfZILg+cIHslfSHutHGq3n+UEvY/wwSPfG0V/twyh0O+7lnaz3U3L9LnQbeb6OU3fOnTcOuv7e36++z7NhuN3Xuurf6uO94rttbxerzuF4zd+yPcb+rjn8r4fisfW9i7vGfIYm+P76eGzN+1f3/nbPn06HJdvi8je18d327TZTLFv1dKnNT6nb3e/B9bsf2vO1v9UVfWhXHu/GRG8y9n8XXnXoLXMMJr3+iHvF2oP0rW856fC1nq3mmP66fH7XElfYA8GXUv5nt89vMtK+oBGm5n+MHb2Wyl/zl6E/dcOVwd+73UrpHz+zY/WyWTqwFq0TjQaPuSlcdLc3SzHwZ93aTffv7md/F0fahmsaPSB4H2r5LCfSUNqdDhXJvQfXfjts2wFfKjRuwsz0vcVyjP5e9rHupJ+An92nkbJXZYe2sz0rzG/yUdWIQO/1LBfBGhIV+bkM3QEfEygouFcjnFs4M8CLQ8ZC+VwKkmo2eZixAi/9tRPbQSbeZcY9uasP/Vovst6YCe9JLIxxWzk9x/yh3j7vhgn9ElzOfD9puhf6koL+5XH9TxNQ6ehqdwvPhsxfd3l+EMsxBSzI9eL9u8BZ4xBlRT2i8Quti0GLOkcEtqcYjlgCruO9HoE4mZ7kpnnvFxXStjPEhnR31oP6HwpPbnrcmwz1s0xkO3DdVp3jEWhlLDfJbzmunachqb06L9tWYZKvgfWzTHUo1nkIrIbNrwrIexXiTdi7bj8dBy4m9FUbMJ+xgNOGOlR/8l+1lhC2OfQiK6jjpSWcmyOi6DHWHXPhddZ7qP6qoCwdymEFTuXk1ZKSzl9P0KDsIcPXYFexEX/3Kte5jQ1M5UcbUq7nuTlcgvZtudOHu318r7jWrJWD0+6+pHmrZa3v6vJLgLnHPZz5VH98c4I2kep4D5Lhzreh45ObDqfSynibevYNI6vL8y173meoh0xja480FjC2XSUNN/KTDV4La6cw15ramY2fO5aKtnKbZ4aHWjVqo3/yEE61L61X+kYF3nvk8JtrH2dXmstdcp2xDTu9bO5Qui+PbhutpffUdAn+XNes9f4kTYB8fJgTfwimzRolC6wWd82moB/ko7nc9OUg8IF4K4O73K8LlzakV2sdBykDZ5ar28TbPDje/a/tfx9nBwGbl7kGvZaIfHmcFujy791EcNIM9SWcFrLcC5t85rQU8mp2Mj3etuPzOzxu9Jx3OtPGmFvax/yNulcw14j6I+Oo/WL0ihlzLRv3XpdR7xClZ3IuR1LtbX4Po8BR70+l1GGlCsJdpt0rmGvMSIcsiyjUavGJQDrVq18U+v+PaHHwjXWM4e0Y8qbx8fE5cQZal9Zn31syIw32MbpOS/j+DYkJC4KjWlzIjNVJf8JsPWhppzbsUQuey5cErxeMmRJhmWckXyH22XEKMN3SDwKwMn2uFTgO+zHtGNKJShi5fpbSO0EO6RvBetXuT9U5cuY6aTvqWhfAO542rTXmLYg7MdjdvQnbr2MTAo/9Bg2F4/dmHbkjpw8+WzXISsKwZZYCXs7sa95D91+rTRj2pGSDXki7PHFmB+6xrrz7d9PaQeuKY1pC7ZCzJPPsB/y1H6w52ZyDXvfyy71iKDwfa/4bedcZTzqjKkdCfs8+byO4LIZTxV6n4Zcw15jfXXIWVvjSd7bAPRZA+gsT5c+PXhpPeEYQiztiDicPOeFS4GzoDNyRvb2hoSERnne9khk7jGETC2YmB4giqUdufCdN9+j+0+LmWDwInu5hr3GLV4Lx6DQKpPbHoX4XFoIWqfDUs7tiHj4fnhrLs+63Ns/2jzRHnzDlJyXcTSCYucQsC7/1kW7Y/r8+zHeXnpWWpJzaZsP7sTJnkaF2kqWdH7e1KCa7In2kGG/G1l8y/b1Ke+n8ah186P/8WD6Vctn0Dhzn29OYlNdNAwZflO3I/Xs83cuoZR1zk/QHhR3VfqcaIcjrRFI5XDiqAMXUjspnTinbEfE55D7iT3nsB+yD6uLxQSdQ/Pi6dKirGxtefHJp4PyyWWKdkR89h1r7NnI/aGqnErTHpXX1WcPths0F5ZC34JYxBQbUXjLuRlyL4SW09n6Xh1w3+G/lOsi7RF+0Ac/OmQ/xUYUzMY2we+UCaGEqpcbhQ2yQ9t3jG61RvqxbW6S/RQb0XiT2Wt2fa2E2jgH5Qub2vp29ymp7C5bAyKES677DpdSCE1r8+8Q+j77qaAa4XvqoSOQkzxNnlXglxL25mydmo3FrCTlWYurrC+gISom8LUHicH6dEkljk+JFfDaWy5dhNqYOQYni9tDAV+a/vaieDfYa8g7BkurZ39MJPD3Dmd8lx37c7DN7JZaxM0UCHz1OMpvcug59Ky8xM1LjnK2jnUNfzNgarcNvJ499Xf3RuAjsIME9NuIkf5RThohlof+UOpOVWZ6FtN691k+09BRus+RR59YllLeAs5ozpxcIPYS1k/yO9j0/O4urX/zTf5/k2VOydsSmou2oUKyz0ZGDWNG5+cAxxLbXQqbALfJhbpQh/Rs5fXcsdnPt9a/6eqjwYoKsgft1+lZ6B/0ttUhfNC8oLSXvx3bxeCD4vrnIfIlP+ibKweyxpPhd3+jhP1vewkN7SvkZhnETAN9h6fvC0pmZBvzbY9mlvbiqe3OrVkfymZq0muVDCHsJ3Ro7cP6KoE8ZnmlvW73NHJd3sWhdfJyfT/zmV+Ubz3z7dRqu82A4N/L9xX8TglEaS5hXMt+HL5Df6lwEunMqqfr9er5vbK3sKj8eIn4gt6qZ1p6yrjCZN9xl/SsAuztesJ4I7+VoQPBtVINqkPXjJSwB4A/zWQkb8PcnfZo0FDLyWOlWGht0zWTJ+wB4E9aI29tz13X6gh7APiqllF9ahvN91YI4AItAHzVd30nZr03FTCyB4Cvfia4eclZlnA6MbIHgN80L55qeljChLAHgN+m3m95CKvd+FjGAYBfmmdoPhP7Ls62ZUwY2QPAL+vEvgen/XIZ2QOA20NUMTA1sKyf4GVkDwBprdWfXYO+IuwB4D9mh7jYaySZnfaca/IQ9gDwy172l9AoPT7WRU5GgzcPYs0eAO4zRcseVbnVtvWxFShhDwD9ZlJ7fh2wjILZ99jb3heEPQDYM8E/U7ioawJ+TJ38ToQ9AIzTvj9/YbnV4KEV6OcQO6MR9gBQAO7GAYACEPYAUADCHgAKQNgDQAEIewAoAGEPAAUg7AGgAIQ9ABSAsAeAAhD2AFAAwh4ACkDYA0ABCHsAKABhDwAFIOwBoACEPQAUgLAHgAIQ9gBQAMIeAApA2ANAAQh7ACgAYQ8ABSDsAaAAhD0AFICwB4DcVVX1LxQJB4KKTBIlAAAAAElFTkSuQmCC",n.appendChild(r),r.onload=function(){n.style.display="block"}}(),e.on("preload:end",(function(){e.off("preload:progress")})),e.on("preload:progress",(function(e){var n=document.getElementById("progress-bar");n&&(e=Math.min(1,Math.max(0,e)),n.style.width=100*e+"%")})),e.on("start",(function(){var e=document.getElementById("application-splash-wrapper");e.parentElement.removeChild(e)}))}));pc.extend(pc,function(){var TweenManager=function(t){this._app=t,this._tweens=[],this._add=[]};TweenManager.prototype={add:function(t){return this._add.push(t),t},update:function(t){for(var i=0,e=this._tweens.length;i<e;)this._tweens[i].update(t)?i++:(this._tweens.splice(i,1),e--);this._add.length&&(this._tweens=this._tweens.concat(this._add),this._add.length=0)}};var Tween=function(t,i,e){pc.events.attach(this),this.manager=i,e&&(this.entity=null),this.time=0,this.complete=!1,this.playing=!1,this.stopped=!0,this.pending=!1,this.target=t,this.duration=0,this._currentDelay=0,this.timeScale=1,this._reverse=!1,this._delay=0,this._yoyo=!1,this._count=0,this._numRepeats=0,this._repeatDelay=0,this._from=!1,this._slerp=!1,this._fromQuat=new pc.Quat,this._toQuat=new pc.Quat,this._quat=new pc.Quat,this.easing=pc.Linear,this._sv={},this._ev={}},_parseProperties=function(t){var i;return t instanceof pc.Vec2?i={x:t.x,y:t.y}:t instanceof pc.Vec3?i={x:t.x,y:t.y,z:t.z}:t instanceof pc.Vec4||t instanceof pc.Quat?i={x:t.x,y:t.y,z:t.z,w:t.w}:t instanceof pc.Color?(i={r:t.r,g:t.g,b:t.b},void 0!==t.a&&(i.a=t.a)):i=t,i};Tween.prototype={to:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this},from:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._from=!0,this},rotate:function(t,i,e,n,s,r){return this._properties=_parseProperties(t),this.duration=i,e&&(this.easing=e),n&&this.delay(n),s&&this.repeat(s),r&&this.yoyo(r),this._slerp=!0,this},start:function(){var t,i,e,n;if(this.playing=!0,this.complete=!1,this.stopped=!1,this._count=0,this.pending=this._delay>0,this._reverse&&!this.pending?this.time=this.duration:this.time=0,this._from){for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this._properties[t],this._ev[t]=this.target[t]);this._slerp&&(this._toQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._fromQuat.setFromEulerAngles(i,e,n))}else{for(t in this._properties)this._properties.hasOwnProperty(t)&&(this._sv[t]=this.target[t],this._ev[t]=this._properties[t]);this._slerp&&(this._fromQuat.setFromEulerAngles(this.target.x,this.target.y,this.target.z),i=void 0!==this._properties.x?this._properties.x:this.target.x,e=void 0!==this._properties.y?this._properties.y:this.target.y,n=void 0!==this._properties.z?this._properties.z:this.target.z,this._toQuat.setFromEulerAngles(i,e,n))}return this._currentDelay=this._delay,this.manager.add(this),this},pause:function(){this.playing=!1},resume:function(){this.playing=!0},stop:function(){this.playing=!1,this.stopped=!0},delay:function(t){return this._delay=t,this.pending=!0,this},repeat:function(t,i){return this._count=0,this._numRepeats=t,this._repeatDelay=i||0,this},loop:function(t){return t?(this._count=0,this._numRepeats=1/0):this._numRepeats=0,this},yoyo:function(t){return this._yoyo=t,this},reverse:function(){return this._reverse=!this._reverse,this},chain:function(){for(var t=arguments.length;t--;)t>0?arguments[t-1]._chained=arguments[t]:this._chained=arguments[t];return this},update:function(t){if(this.stopped)return!1;if(!this.playing)return!0;if(!this._reverse||this.pending?this.time+=t*this.timeScale:this.time-=t*this.timeScale,this.pending){if(!(this.time>this._currentDelay))return!0;this._reverse?this.time=this.duration-(this.time-this._currentDelay):this.time-=this._currentDelay,this.pending=!1}var i=0;(!this._reverse&&this.time>this.duration||this._reverse&&this.time<0)&&(this._count++,this.complete=!0,this.playing=!1,this._reverse?(i=this.duration-this.time,this.time=0):(i=this.time-this.duration,this.time=this.duration));var e,n,s=0===this.duration?1:this.time/this.duration,r=this.easing(s);for(var h in this._properties)this._properties.hasOwnProperty(h)&&(e=this._sv[h],n=this._ev[h],this.target[h]=e+(n-e)*r);if(this._slerp&&this._quat.slerp(this._fromQuat,this._toQuat,r),this.entity&&(this.entity._dirtifyLocal(),this.element&&this.entity.element&&(this.entity.element[this.element]=this.target),this._slerp&&this.entity.setLocalRotation(this._quat)),this.fire("update",t),this.complete){var a=this._repeat(i);return a?this.fire("loop"):(this.fire("complete",i),this.entity&&this.entity.off("destroy",this.stop,this),this._chained&&this._chained.start()),a}return!0},_repeat:function(t){if(this._count<this._numRepeats){if(this._reverse?this.time=this.duration-t:this.time=t,this.complete=!1,this.playing=!0,this._currentDelay=this._repeatDelay,this.pending=!0,this._yoyo){for(var i in this._properties){var e=this._sv[i];this._sv[i]=this._ev[i],this._ev[i]=e}this._slerp&&(this._quat.copy(this._fromQuat),this._fromQuat.copy(this._toQuat),this._toQuat.copy(this._quat))}return!0}return!1}};var BounceOut=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},BounceIn=function(t){return 1-BounceOut(1-t)};return{TweenManager:TweenManager,Tween:Tween,Linear:function(t){return t},QuadraticIn:function(t){return t*t},QuadraticOut:function(t){return t*(2-t)},QuadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},CubicIn:function(t){return t*t*t},CubicOut:function(t){return--t*t*t+1},CubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},QuarticIn:function(t){return t*t*t*t},QuarticOut:function(t){return 1- --t*t*t*t},QuarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},QuinticIn:function(t){return t*t*t*t*t},QuinticOut:function(t){return--t*t*t*t*t+1},QuinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},SineIn:function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)},SineOut:function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)},SineInOut:function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))},ExponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},ExponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},ExponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},CircularIn:function(t){return 1-Math.sqrt(1-t*t)},CircularOut:function(t){return Math.sqrt(1- --t*t)},CircularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},BackIn:function(t){var i=1.70158;return t*t*((i+1)*t-i)},BackOut:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},BackInOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)},BounceIn:BounceIn,BounceOut:BounceOut,BounceInOut:function(t){return t<.5?.5*BounceIn(2*t):.5*BounceOut(2*t-1)+.5},ElasticIn:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/.4))},ElasticOut:function(t){var i,e=.1;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-i)*(2*Math.PI)/.4)+1)},ElasticInOut:function(t){var i,e=.1,n=.4;return 0===t?0:1===t?1:(!e||e<1?(e=1,i=.1):i=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*(2*Math.PI)/n)*.5+1)}}}()),function(){pc.Application.prototype.addTweenManager=function(){this._tweenManager=new pc.TweenManager(this),this.on("update",(function(t){this._tweenManager.update(t)}))},pc.Application.prototype.tween=function(t){return new pc.Tween(t,this._tweenManager)},pc.Entity.prototype.tween=function(t,i){var e=this._app.tween(t);return e.entity=this,this.once("destroy",e.stop,e),i&&i.element&&(e.element=i.element),e};var t=pc.Application.getApplication();t&&t.addTweenManager()}();